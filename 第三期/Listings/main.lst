C51 COMPILER V9.60.0.0   MAIN                                                              11/20/2022 19:44:06 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\APP\Keil\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\mai
                    -n.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "smg.h"
   2          #include "beepled.h"
   3          #include "menu.h"
   4          #include "oled.h"
   5          
   6          extern u8 s0;
   7          extern u8 s1;
   8          extern u8 s2;
   9          
  10          void Timer2Init(void) 
  11          {
  12   1        AUXR |= 0x04;   
  13   1        T2L = 0x1d;   
  14   1        T2H = 0xfc;   
  15   1        AUXR |= 0x10;
  16   1        IE2|=0x04;
  17   1      }
  18          
  19          void all_breath()
  20          {
  21   1        
  22   1        static u8 i,j,k,a=0x80,b=0xff,c;
  23   1        
  24   1        Hc595_Send_Dat2(0x00);
  25   1        i++;
  26   1        if(i<j)
  27   1        {
  28   2          S0=S1=S2=S3=k;
  29   2          Hc595_Send_Dat1(a);//大
  30   2        }
  31   1        else
  32   1        {
  33   2          Hc595_Send_Dat1(b);//小
  34   2        
  35   2          S0=S1=S2=S3=!k;
  36   2        }
  37   1        if(i==200)
  38   1        {
  39   2          i=0;j++;
  40   2        }
  41   1        if(j==200)
  42   1        {
  43   2          j=0;k=!k;c=a;a=b;b=c;
  44   2        }
  45   1      }
  46          void breath()
  47          {
  48   1        
  49   1        static u8 i,j,a=0x80,b=0xff,c;
  50   1      
  51   1        i++;
  52   1        if(i<j)
  53   1        {
  54   2          Hc595_Send_Dat1(a);//大
C51 COMPILER V9.60.0.0   MAIN                                                              11/20/2022 19:44:06 PAGE 2   

  55   2        }
  56   1        else
  57   1        {
  58   2          Hc595_Send_Dat1(b);//小
  59   2        }
  60   1        if(i==200)
  61   1        {
  62   2          i=0;j++;
  63   2        }
  64   1        if(j==200)
  65   1        {
  66   2          j=0;c=a;a=b;b=c;
  67   2        }
  68   1      }
  69          
  70          void main ()
  71          {
  72   1        EA=1;
  73   1        OLED_Init();       
  74   1        OLED_Clear();
  75   1        Hc595_Send_Dat1(0xff);
  76   1      
  77   1        OLED_ShowString(36,3,"WELCOME");
  78   1        Delay1000ms();
  79   1        OLED_Clear();
  80   1        fun_0();
  81   1          
  82   1        Timer2Init();
  83   1        while(1)
  84   1        {
  85   2          key_scan();
  86   2          if(TR0==0)
  87   2            flash();
  88   2          if(s0==1)
  89   2          {
  90   3          
  91   3            if(s1==0)
  92   3            all_breath();
  93   3            
  94   3          }
  95   2        }
  96   1      }
  97          
  98          
  99          void time2() interrupt 12
 100          {
 101   1        if(s1==1)
 102   1          breath();
 103   1        beepled();
 104   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    283    ----
   CONSTANT SIZE    =      8    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
