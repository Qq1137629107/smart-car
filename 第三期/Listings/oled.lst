C51 COMPILER V9.60.0.0   OLED                                                              11/20/2022 19:44:06 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE OLED
OBJECT MODULE PLACED IN .\Objects\oled.obj
COMPILER INVOKED BY: D:\APP\Keil\C51\BIN\C51.EXE oled.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\ole
                    -d.lst) TABS(2) OBJECT(.\Objects\oled.obj)

line level    source

   1          #include "cmd_data.h"
   2          #include "oled.h"
   3          #include "oledfont.h"    
   4          #include "iic.h"
   5          
   6          void OLED_WR_Byte(u16 dat, u16 cmd)
   7          {
   8   1        if (cmd)
   9   1        {
  10   2          Write_IIC_Data(dat);
  11   2        }
  12   1        else
  13   1        {
  14   2          Write_IIC_CMD(dat);
  15   2        }
  16   1      }
  17          
  18          void OLED_Set_Pos(u8 x, u8 y)
  19          {
  20   1        OLED_WR_Byte(0xb0 + y, SEND_CMD);
  21   1        OLED_WR_Byte(((x & 0xf0) >> 4) | 0x10, SEND_CMD);
  22   1        OLED_WR_Byte((x & 0x0f), SEND_CMD);
  23   1      }
  24          
  25          void OLED_Clear(void)
  26          {
  27   1        u8 i, n;
  28   1        for (i = 0; i < 8; i++)
  29   1        {
  30   2          OLED_WR_Byte(0xb0 + i, SEND_CMD); 
  31   2          OLED_WR_Byte(0x00, SEND_CMD);      
  32   2          OLED_WR_Byte(0x10, SEND_CMD);      
  33   2          for (n = 0; n < 128; n++)OLED_WR_Byte(0, SEND_DATA);
  34   2        }
  35   1      }
  36          
  37          void OLED_ShowChar(u8 x, u8 y, u8 chr)
  38          {
  39   1        u8 c = 0, i = 0;
  40   1        c = chr - ' ';    
  41   1        if (x > Max_Column - 1)
  42   1        {
  43   2          x = 0; y = y + 2;
  44   2        }
  45   1      
  46   1          OLED_Set_Pos(x, y);
  47   1          for (i = 0; i < 6; i++)
  48   1            OLED_WR_Byte(F6x8[c][i], SEND_DATA);
  49   1      }
  50          
  51          
  52          void OLED_ShowString(u8 x, u8 y, u8 *chr)
  53          {
  54   1        u8 j = 0;
C51 COMPILER V9.60.0.0   OLED                                                              11/20/2022 19:44:06 PAGE 2   

  55   1        while (chr[j] != '\0')
  56   1        {
  57   2          OLED_ShowChar(x, y, chr[j]);
  58   2          x += 8;
  59   2          if (x > 120) 
  60   2          { 
  61   3            x = 0; y += 2; 
  62   3          }
  63   2          j++;
  64   2        }
  65   1      }
  66          
  67          void OLED_Init(void)
  68          {
  69   1        u8 i = 0;
  70   1        while (i < 27)
  71   1        {
  72   2          OLED_WR_Byte(cmd_data[i], SEND_CMD);
  73   2          i++;
  74   2        }
  75   1      }
  76          
  77          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    322    ----
   CONSTANT SIZE    =    348    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     27      14
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
