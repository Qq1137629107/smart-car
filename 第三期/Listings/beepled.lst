C51 COMPILER V9.60.0.0   BEEPLED                                                           11/20/2022 19:44:07 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE BEEPLED
OBJECT MODULE PLACED IN .\Objects\beepled.obj
COMPILER INVOKED BY: D:\APP\Keil\C51\BIN\C51.EXE beepled.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -beepled.lst) TABS(2) OBJECT(.\Objects\beepled.obj)

line level    source

   1          #include "beepled.h"
   2          #include "smg.h"
   3          extern u8 s1;
   4          extern u8 s2;
   5          extern u8 s3;
   6          extern u8 s4;
   7          extern u8 k4;
   8          u8 leds[7]={0xfd,0xf9,0xfb,0xfa,0xfe,0xfc,0xfd};
   9          u8 Led[5]={64,32,16,8,64};
  10          code u8 SONG_TONE[] = { 212,212,190,212,159,169,212,212,190,212,142,159,
  11          212,212,106,106,126,159,169,190,119,119,119,126,159,142,159,0 };
  12          void Hc595_Send_Dat1(u8 dat)
  13          {
  14   1        u8 i=0;
  15   1        for(i=0 ;i<8;i++)
  16   1        {
  17   2          SER1=dat>>7;
  18   2          dat<<=1;
  19   2          SRCLK1=0;
  20   2          SRCLK1=1;
  21   2        }
  22   1        RCLK1=0;
  23   1        RCLK1=1;
  24   1        
  25   1      }
  26          
  27          void beepled()
  28          {
  29   1        static u16 i, j, k;
  30   1        static u8 x, y, z, a, b,d;
  31   1      
  32   1        if (k4 == 1 && s2 == 1)
  33   1        {
  34   2          i++; k++;
  35   2        }
  36   1        else if (k4 == 1 && s2 == 0)
  37   1          k++;
  38   1        else if (k4 == 0 && s2 == 1)
  39   1          i++;
  40   1        if(k4==1||s2==1)  
  41   1        {
  42   2          if (k < s4)
  43   2            z = 128;
  44   2          else
  45   2            z = 0;
  46   2      
  47   2          if (k == SONG_TONE[a])
  48   2          {
  49   3            k = 0;
  50   3            b++;
  51   3            if (b == 70)
  52   3            {
  53   4              b = 0;
  54   4              a++;d++;
C51 COMPILER V9.60.0.0   BEEPLED                                                           11/20/2022 19:44:07 PAGE 2   

  55   4              if (a == 27)
  56   4                a = 0;
  57   4            }
  58   3          }
  59   2          if (i < j)
  60   2            Hc595_Send_Dat1(leds[x + 1] - Led[y + 1] - z);//ด๓
  61   2          else
  62   2            Hc595_Send_Dat1(leds[x] - Led[y] - z);//ะก
  63   2          if (i == s3)
  64   2          {
  65   3            i = 0; j++;
  66   3          }
  67   2          if (j == s3)
  68   2          {
  69   3            j = 0; x++; y++;
  70   3          }
  71   2          if (x == 6)x = 0;
  72   2          if (y == 4)y = 0;
  73   2        }
  74   1        if (k4 == 1 && s2 == 0)
  75   1        {
  76   2          if(d==5)
  77   2          {
  78   3            d=1;
  79   3            Hc595_Send_Dat2(0x00);
  80   3          }
  81   2          if(d==1)
  82   2          {
  83   3            S0=0;
  84   3            S1=1;
  85   3            S2=1;
  86   3            S3=1;
  87   3          }
  88   2          if(d==2)
  89   2          {
  90   3            S0=1;
  91   3            S1=0;
  92   3            S2=1;
  93   3            S3=1;
  94   3          }
  95   2          if(d==3)
  96   2          {
  97   3            S0=1;
  98   3            S1=1;
  99   3            S2=0;
 100   3            S3=1;
 101   3          }
 102   2          if(d==4)
 103   2          {
 104   3            S0=1;
 105   3            S1=1;
 106   3            S2=1;
 107   3            S3=0;
 108   3          }
 109   2        }
 110   1      }
 111          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    368    ----
   CONSTANT SIZE    =     28    ----
C51 COMPILER V9.60.0.0   BEEPLED                                                           11/20/2022 19:44:07 PAGE 3   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     24    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
